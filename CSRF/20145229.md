<h1>Nguyen Duc Huy, 20145449</h1>

# Task 1: Normal transaction with CRSF vulnerability
## 1.1: Login, check balance:
- Open the source folder in terminal
- Run the target.py file by: ```python target.py```
- All the port running on the local host with port 5000
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/running_target.jpg)

- Login user account through: http://[::]:5000/login
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/login_page.jpg)

- Enter username and password of the given user Alice:
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/login_alice.jpg)

- Login with alice account successfull
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/logged_alice.jpg)

- Checking balance of user alice through http://[::]:5000/balance
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/alice_balance.jpg)

## 1.2: Doing the transaction
- Go to http://[::]:5000/transfer to do the transaction
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/alice_transfer.jpg)

- Try transfer to user Bod 1000$ by enter:
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/alice_transfer_bob.jpg)

- Checking bob balance, whenever the transaction is success or not.
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/bob_balance.jpg)

- So that Bob's balance has increased by 1000$, when Bob already had 10.000$ in the account balance.
## 1.3: Transfer money illegitimately
- Change a little bit in 'hidden_form.html' for exploit run in the background successfully
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/hidden_form_change.jpg)

- Suppose now Bob is still logged in after the above transfer process. We started making illegal transfers by luring Bob into accessing and running hidden_form.
- First, we deploy the hidden form to the local area, by run ```python -m http.server 8000``` and chose hidden_form.html to run.
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/hidden_form_run.jpg)

- After running the hidden form, it will work in the background. The place where a money transfer transaction will be made without Bob's knowledge, because now Bob only sees a picture of a cat appearing on the screen.
- Let's check to see if this illegal transaction was successful or not by going to bob's blance.
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/bob_balance_hacked.jpg)

- Bob's amount was previously $11,000 but has now decreased to $10,000 after running the malicious code. Transferred that $1000 to the hacker's account.
- Checking the balance of the attacker's account, we can see that he has $1,000 that he just stole from Bob.
  
![](https://github.com/noiseandsmke/security-ex/blob/main/CSRF/img/attacker_balance.jpg)
# Task 2: CSRF Countermeasure implementation

## 2.1: Solution 1:

## 2.2: Solution 2:
